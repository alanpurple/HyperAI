syntax = "proto3";

package Eda;

service Preprocess {
	rpc Cleanse (dataloc) returns (Reply) {}
	rpc Desribe (dataloc) returns (SummaryReply) {}
	rpc Pca (PcaRequest) return (PcaResponse) {}
	rpc PcaRsvd (PcaRequest) return (PcaResponse) {}
}

message dataloc {
	int32 type = 1;
	string location = 2;
}

message ResultMsg {
	string msg = 1;
}

message Reply {
	repeated string msg = 1;
}

message SummaryReply {
	repeated Summary summaries = 1;
}

message Summary {
	string name = 13;
	uint32 count = 1;
	float mean = 2;
	float min = 3;
	float std = 4;
	float q1 = 5;
	float q2 = 6;
	float q3 = 7;
	float max = 8;
	uint32 unique = 9;
	string top = 10;
	uint32 freq = 11;
	string type = 12;
}

message PcaRequest {
	string tableName = 1;
	string labelColumn = 2;
	uint32 nComponents = 3;
	string newTableName = 4;
}

message PcaResponse {
	// -1 for no error, 0 for bad request, 1 for process error
	int32 error = 1;
	// optional
	repeated float variance = 2;
	repeated float varianceRatio = 3;
}